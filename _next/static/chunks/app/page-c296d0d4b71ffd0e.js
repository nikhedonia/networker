(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1797:(e,t,r)=>{"use strict";r.d(t,{Game:()=>j});var n=r(5155),c=r(2115);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,c,i;n=e,c=t,i=r[t],c in n?Object.defineProperty(n,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[c]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return e.slice(0,-1)}function l(e,t=0){return t?Array.from(Array(t-e).keys()).map(t=>t+e):Array.from(Array(e).keys())}function a(e){return[...new Set(e)]}function h(e,t){let r=a(e.map(e=>e.set)).filter(Boolean),n=[l(1,e.length+1),r].reduce((e,t)=>e.filter(e=>!t.includes(e))).sort(()=>.5-t());e.filter(e=>!e.set).forEach((e,t)=>e.set=n[t])}function d(e,t,r=.5){s(e).forEach((n,c)=>{var i,o;let s=e[c+1],l=n.set!==s.set,a=t()<=r;l&&a&&(i=s.set,o=n.set,e.forEach(e=>{e.set===i&&(e.set=o)}),n.right=!1,s.left=!1)})}let u=function(e=8,t=e,r=!0,n=1){var c;let i=(c=n,function(){let e=c+=0x6d2b79f5;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/0x100000000}),u=[],f=l(e);for(let n=0;n<t;n+=1){let c=f.map(c=>({x:c,y:n,top:r||n>0,left:r||c>0,bottom:r||n<t-1,right:r||c<e-1}));u.push(c)}s(u).forEach((e,t)=>{h(e,i),d(e,i),function(e,t,r){let n,c=Object.values((n=a(e.map(e=>e.set)).reduce((e,t)=>o(o({},e),{},{[t]:[]}),{}),e.forEach(e=>n[e.set].push(e)),n)),{ceil:i}=Math;c.forEach(e=>{(function(e,t,r){t=null==t?1:t;let n=null==e?0:e.length;if(!n||t<1)return[];t=t>n?n:t;let c=-1,i=n-1,o=[...e];for(;++c<t;){let e=c+Math.floor(r()*(i-c+1)),t=o[e];o[e]=o[c],o[c]=t}return o.slice(0,t)})(e,i(r()*e.length),r).forEach(e=>{if(e){let r=t[e.x];e.bottom=!1,r.top=!1,r.set=e.set}})})}(e,u[t+1],i)});let k=u[u.length-1];return h(k,i),d(k,i,1),u},f=["black","blue","red"],k={I:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:0,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":f[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),L:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:0,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":f[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:2,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),T:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:0,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":f[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:2,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),X:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":f[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),P:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:0,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:0,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":f[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:2,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]})},x=e=>{let t=1==e.sinkOrSource,r=2==e.sinkOrSource,c={width:"5rem",height:"5rem",transition:"0.2s ease-in all",display:"inline-block",transform:"rotate(".concat(90*e.rotation,"deg)")},i=k[e.kind];return(0,n.jsxs)("svg",{viewBox:"0 0 3 3",style:c,children:[(0,n.jsx)(i,{...e}),(0,n.jsx)("circle",{cx:1.5,cy:1.5,r:.2,style:{fill:t?"blue":r?"purple":"white"}})]})};function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[];return e.forEach((e,n)=>e.forEach((e,c)=>{e.sinkOrSource==t&&r.push([c,n])})),r}function g(e,t){var r;let[n,c]=t,i=null==e||null==(r=e[c])?void 0:r[n];if(!i)return[];switch(i.kind.toUpperCase()){case"L":switch(i.rotation%4){case 0:return[[n,c-1],[n+1,c]];case 1:return[[n,c+1],[n+1,c]];case 2:return[[n-1,c],[n,c+1]];case 3:return[[n-1,c],[n,c-1]]}case"I":switch(i.rotation%4){case 0:case 2:return[[n,c+1],[n,c-1]];case 1:return[[n-1,c],[n+1,c]];case 3:return[[n+1,c],[n-1,c]]}case"T":switch(i.rotation%4){case 0:return[[n-1,c],[n+1,c],[n,c+1]];case 1:return[[n-1,c],[n,c-1],[n,c+1]];case 2:return[[n-1,c],[n+1,c],[n,c-1]];case 3:return[[n+1,c],[n,c-1],[n,c+1]]}case"P":return[[n-1,c],[n+1,c],[n,c-1],[n,c+1]];default:switch(i.rotation%4){case 0:return[[n,c+1]];case 1:return[[n-1,c]];case 2:return[[n,c-1]];case 3:return[[n+1,c]]}}return[]}function w(e){let t=function(e){let t=y(e,1),r=new Set([]);for(let[n,c]of t)r.has("".concat(n,"-").concat(c))||(r.add("".concat(n,"-").concat(c)),(function(e,t){let[r,n]=t;return g(e,[r,n]).filter(t=>{let[c,i]=t,o=g(e,[c,i]);return null==o?void 0:o.find(e=>{let[t,c]=e;return"".concat(t,"-").concat(c)=="".concat(r,"-").concat(n)})})})(e,[n,c]).forEach(e=>{t.push(e)}));return r}(e);return{done:y(e,2).every(e=>{let[r,n]=e;return t.has("".concat(r,"-").concat(n))}),cells:e,connected:t}}function p(e){let t=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=u(e,e,!0,Math.round(1e5*Math.random())).map(e=>e.map(e=>({...e,edges:+!e.bottom+ +!e.left+ +!e.right+ +!e.top})));console.log({maze:n});let c=n.flatMap(e=>e).toSorted(()=>Math.random()-.5).sort((e,t)=>e.edges-t.edges).slice(0,t),i=new Set(c.map(e=>"".concat(e.x,"-").concat(e.y)));console.log({sinksArray:c,inputs:t});let o=new Set([]);for(;o.size<r;){let[t,r]=[Math.floor(Math.random()*e),Math.floor(Math.random()*e)];i.has("".concat(t,"-").concat(r))||o.add("".concat(t,"-").concat(r))}return n.map(e=>e.map(e=>{let t=i.has("".concat(e.x,"-").concat(e.y)),r=o.has("".concat(e.x,"-").concat(e.y)),n="P";switch(e.edges){case 1:n="X";break;case 3:n="T";break;case 2:n=e.left==e.right?"I":"L"}return{cell:e,kind:n,sinkOrSource:2*t+ +r,rotation:0,connected:r}}))}(e,2*e,1);return console.log({game:t}),w(t)}function b(){let[e,t]=(0,c.useState)(5),[r,i]=(0,c.useState)(()=>p(e)),[o,s]=(0,c.useState)(0);return(0,n.jsxs)("div",{children:[(0,n.jsx)("table",{cellSpacing:"0",cellPadding:"0",style:{borderSpacing:0,borderCollapse:"collapse",border:"none"},children:(0,n.jsx)("tbody",{children:r.cells.map((e,t)=>(0,n.jsx)("tr",{style:{margin:0,padding:0},children:e.map((e,c)=>(0,n.jsx)("td",{style:{margin:0,padding:0,border:"solid 1px black",width:"5rem",height:"5rem"},onClick:()=>{let e=r.cells[t].with(c,{...r.cells[t][c],rotation:r.cells[t][c].rotation+1});i(w(r.cells.with(t,e))),s(o+1)},children:(0,n.jsx)(x,{...e,connected:r.connected.has("".concat(c,"-").concat(t))})},c))},t))})}),(0,n.jsx)("div",{children:" connect #afa pipes to red sinks; Click a pipe to rotate"}),(0,n.jsxs)("div",{children:[" complete: ",r.done?"true":"false"]}),(0,n.jsxs)("div",{children:["moves: ",o]}),(0,n.jsx)("button",{onClick:()=>{s(0),i(p(e))},children:"New Game"}),(0,n.jsxs)("label",{children:["gridSize",(0,n.jsx)("input",{type:"number",value:e,min:2,max:20,step:1,onChange:e=>{t(+e.target.value),s(0),i(p(+e.target.value))}})]})]})}function j(){return(0,n.jsx)("div",{children:(0,n.jsx)(b,{})})}},5963:(e,t,r)=>{Promise.resolve().then(r.bind(r,1797))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5963)),_N_E=e.O()}]);