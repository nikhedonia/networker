(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1797:(e,t,r)=>{"use strict";r.d(t,{Game:()=>b});var n=r(5155),c=r(2115);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,c,s;n=e,c=t,s=r[t],c in n?Object.defineProperty(n,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[c]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){return e.slice(0,-1)}function o(e,t=0){return t?Array.from(Array(t-e).keys()).map(t=>t+e):Array.from(Array(e).keys())}function a(e){return[...new Set(e)]}function h(e,t){let r=a(e.map(e=>e.set)).filter(Boolean),n=[o(1,e.length+1),r].reduce((e,t)=>e.filter(e=>!t.includes(e))).sort(()=>.5-t());e.filter(e=>!e.set).forEach((e,t)=>e.set=n[t])}function d(e,t,r=.5){l(e).forEach((n,c)=>{var s,i;let l=e[c+1],o=n.set!==l.set,a=t()<=r;o&&a&&(s=l.set,i=n.set,e.forEach(e=>{e.set===s&&(e.set=i)}),n.right=!1,l.left=!1)})}let f=function(e=8,t=e,r=!0,n=1){var c;let s=(c=n,function(){let e=c+=0x6d2b79f5;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/0x100000000}),f=[],u=o(e);for(let n=0;n<t;n+=1){let c=u.map(c=>({x:c,y:n,top:r||n>0,left:r||c>0,bottom:r||n<t-1,right:r||c<e-1}));f.push(c)}l(f).forEach((e,t)=>{h(e,s),d(e,s),function(e,t,r){let n,c=Object.values((n=a(e.map(e=>e.set)).reduce((e,t)=>i(i({},e),{},{[t]:[]}),{}),e.forEach(e=>n[e.set].push(e)),n)),{ceil:s}=Math;c.forEach(e=>{(function(e,t,r){t=null==t?1:t;let n=null==e?0:e.length;if(!n||t<1)return[];t=t>n?n:t;let c=-1,s=n-1,i=[...e];for(;++c<t;){let e=c+Math.floor(r()*(s-c+1)),t=i[e];i[e]=i[c],i[c]=t}return i.slice(0,t)})(e,s(r()*e.length),r).forEach(e=>{if(e){let r=t[e.x];e.bottom=!1,r.top=!1,r.set=e.set}})})}(e,f[t+1],s)});let x=f[f.length-1];return h(x,s),d(x,s,1),f},u=["black","blue","red"],x={I:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:0,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":u[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),L:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:0,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":u[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:2,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),T:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:0,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":u[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:2,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),X:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":u[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]}),P:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:1,y:0,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:0,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":u[e.sinkOrSource]}}),(0,n.jsx)("rect",{x:2,y:1,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}}),(0,n.jsx)("rect",{x:1,y:2,width:1,height:1,style:{stroke:"white",strokeWidth:.1,fill:e.connected?"#afa":"black"}})]})},y=e=>{let t=1==e.sinkOrSource,r=2==e.sinkOrSource,c={width:"100%",height:"100%",transition:"0.2s ease-in all",display:"inline-block",transform:"rotate(".concat(90*e.rotation,"deg)")},s=x[e.kind];return(0,n.jsxs)("svg",{viewBox:"0 0 3 3",style:c,children:[(0,n.jsx)(s,{...e}),(0,n.jsx)("circle",{cx:1.5,cy:1.5,r:.2,style:{fill:t?"blue":r?"purple":"white"}})]})};function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[];return e.forEach((e,n)=>e.forEach((e,c)=>{e.sinkOrSource==t&&r.push([c,n])})),r}function p(e,t){var r;let[n,c]=t,s=null==e||null==(r=e[c])?void 0:r[n];if(!s)return[];switch(s.kind.toUpperCase()){case"L":switch(s.rotation%4){case 0:return[[n,c-1],[n+1,c]];case 1:return[[n,c+1],[n+1,c]];case 2:return[[n-1,c],[n,c+1]];case 3:return[[n-1,c],[n,c-1]]}case"I":switch(s.rotation%4){case 0:case 2:return[[n,c+1],[n,c-1]];case 1:return[[n-1,c],[n+1,c]];case 3:return[[n+1,c],[n-1,c]]}case"T":switch(s.rotation%4){case 0:return[[n-1,c],[n+1,c],[n,c+1]];case 1:return[[n-1,c],[n,c-1],[n,c+1]];case 2:return[[n-1,c],[n+1,c],[n,c-1]];case 3:return[[n+1,c],[n,c-1],[n,c+1]]}case"P":return[[n-1,c],[n+1,c],[n,c-1],[n,c+1]];default:switch(s.rotation%4){case 0:return[[n,c+1]];case 1:return[[n-1,c]];case 2:return[[n,c-1]];case 3:return[[n+1,c]]}}return[]}function w(e){let t=function(e){let t=k(e,1),r=new Set([]);for(let[n,c]of t)r.has("".concat(n,"-").concat(c))||(r.add("".concat(n,"-").concat(c)),(function(e,t){let[r,n]=t;return p(e,[r,n]).filter(t=>{let[c,s]=t,i=p(e,[c,s]);return null==i?void 0:i.find(e=>{let[t,c]=e;return"".concat(t,"-").concat(c)=="".concat(r,"-").concat(n)})})})(e,[n,c]).forEach(e=>{t.push(e)}));return r}(e);return{done:k(e,2).every(e=>{let[r,n]=e;return t.has("".concat(r,"-").concat(n))}),cells:e,connected:t}}function g(e){return w(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=f(e,e,!0,Math.round(1e5*Math.random())).map(e=>e.map(e=>({...e,edges:+!e.bottom+ +!e.left+ +!e.right+ +!e.top})));console.log({maze:n});let c=n.flatMap(e=>e).toSorted(()=>Math.random()-.5).sort((e,t)=>e.edges-t.edges).slice(0,t),s=new Set(c.map(e=>"".concat(e.x,"-").concat(e.y)));console.log({sinksArray:c,inputs:t});let i=new Set([]);for(;i.size<r;){let[t,r]=[Math.floor(Math.random()*e),Math.floor(Math.random()*e)];s.has("".concat(t,"-").concat(r))||i.add("".concat(t,"-").concat(r))}return n.map(e=>e.map(e=>{let t=s.has("".concat(e.x,"-").concat(e.y)),r=i.has("".concat(e.x,"-").concat(e.y)),n="P";switch(e.edges){case 1:n="X";break;case 3:n="T";break;case 2:n=e.left==e.right?"I":"L"}return{cell:e,kind:n,sinkOrSource:2*t+ +r,rotation:0,connected:r}}))}(Math.floor(e/3),e))}function j(){let[e,t]=(0,c.useState)(15),[r,s]=(0,c.useState)(()=>g(e)),[i,l]=(0,c.useState)(0),[o,a]=(0,c.useState)(0);return(0,c.useEffect)(()=>{let e=setInterval(()=>a(e=>e+1),1e3);return()=>clearInterval(e)},[]),(0,c.useEffect)(()=>{r.done&&(a(0),l(0),s(g(e)))},[e,r.done]),(0,n.jsxs)("div",{className:"max-w-md",style:{display:"flex",margin:"auto",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("button",{onClick:()=>{l(0),s(g(e)),a(0)},children:"New Game"}),(0,n.jsxs)("label",{children:[" Difficulty: ",e,(0,n.jsx)("input",{type:"range",value:e,min:15,max:60,step:1,onChange:e=>{let r=Math.max(15,+e.target.value);t(r),l(0),a(0),s(g(r))}})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("table",{cellSpacing:"0",cellPadding:"0",style:{flex:0,borderSpacing:0,borderCollapse:"collapse",border:"none"},children:(0,n.jsx)("tbody",{children:r.cells.map((e,t)=>(0,n.jsx)("tr",{style:{margin:0,padding:0},children:e.map((e,c)=>(0,n.jsx)("td",{style:{margin:0,padding:0,border:"solid 1px black"},onClick:()=>{let e=r.cells[t].with(c,{...r.cells[t][c],rotation:r.cells[t][c].rotation+1});s(w(r.cells.with(t,e))),l(i+1)},children:(0,n.jsx)(y,{...e,connected:r.connected.has("".concat(c,"-").concat(t))})},c))},t))})})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{children:["time: ",o,"s"]}),(0,n.jsxs)("div",{children:["moves: ",i]})]}),(0,n.jsx)("div",{children:" connect green pipes to red sinks; Click a pipe to rotate"})]})}function b(){return(0,n.jsx)("div",{children:(0,n.jsx)(j,{})})}},5963:(e,t,r)=>{Promise.resolve().then(r.bind(r,1797))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5963)),_N_E=e.O()}]);